* forces current values to be saved
.options savecurrents

******************************************
.TRAN 1ms 200ms

.model Default D

* input voltage source
Vin 1 0 0 ac 1.0 sin(0 230 50)

**********************
*n = 200
**********************

*voltage controlled voltage source
E1 3 2 1 0 200

Vaux 2 6 0V
*current controlled current source
F1 1 0 Vaux 200


* MUDAR VALORES DO CAPACITOR E DA RESISTáº¼NCIA
Cfw 7 0 1u
Rfw 7 8 0.5k

Dp1 3 7 Default
Dp2 6 7 Default
Dp3 0 6 Default
Dp4 0 3 Default

* positive limiter
Dp11 8 9 Default
Dp12 9 11 Default
Dp13 10 11 Default
Dp14 11 0 Default

Dp21 8 12 Default
Dp22 12 13 Default
Dp23 13 14 Default
Dp24 14 0 Default

Dp31 8 15 Default
Dp32 15 16 Default
Dp33 16 17 Default
Dp34 17 0 Default

Dp41 8 18 Default
Dp42 18 19 Default
Dp43 19 20 Default
Dp44 20 0 Default

Dp51 8 21 Default
Dp52 21 22 Default
Dp53 22 23 Default
Dp54 23 0 Default


*Rl 3 6 0.5k

.END

.op

.end 

.control

******************************************

*makes plots in color
set hcopypscolor=0
set color0=white
set color1=black
set color2=red
set color3=blue
set color4=violet
set color5=rgb:3/8/0
set color6=rgb:4/0/0

* analise no tempo
tran 1e-5 200e-3

******************************************
hardcopy v_out.ps v(8)
echo v_out_FIG

hardcopy envelope.ps v(7)
echo envelope_FIG

hardcopy regulator.ps v(8) - v(7)
echo regulator_FIG

******************************************
meas tran output AVG v(8)
meas tran max MAX v(8)
meas tran min MIN v(8)

.endc

