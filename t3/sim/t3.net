* forces current values to be saved
.options savecurrents

******************************************
.TRAN 1ms 200ms

.model Default D

* input voltage source
Vin 1 0 0 ac 1.0 sin(0 230 50)

**********************
*n = 0.17
**********************

*voltage controlled voltage source
E1 3 2 1 0 0.17

Vaux 2 0 0V
*current controlled current source
F1 1 0 Vaux 0.17


* MUDAR VALORES DO CAPACITOR E DA RESISTẼNCIA
Ci 5 0 1u
Ri 5 0 0.5k

* diamante de díodos
Dp1.1 3 5 Default
Dp1.2 0 5 Default
Dp1.3 4 0 Default
Dp1.4 4 3 Default

* positive limiter
Dp2 6 7 Default
Dp3 7 8 Default
Dp4 8 4 Default

.END

.op

.end

.control

******************************************

*makes plots in color
set hcopypscolor=0
set color0=white
set color1=black
set color2=red
set color3=blue
set color4=violet
set color5=rgb:3/8/0
set color6=rgb:4/0/0

* analise no tempo
tran 1e-5 200e-3


*plot (v(5)-v(4))

******************************************
hardcopy primeiro.ps v(5)-v(4)
echo primeiro_FIG
* hardcopy vospice400.ps v(1) v(2)

hardcopy diode.ps v(6)-v(5)

******************************************
meas tran output AVG v(4)
meas tran max MAX v(4)
meas tran min MIN v(4)

.endc

